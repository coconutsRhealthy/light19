@if (isVisible) {
    <!-- Backdrop -->
    <div
            class="fixed inset-0 bg-black/40 backdrop-blur-sm z-40"
            (click)="closeModal()"
    ></div>

    <!-- Modal -->
    <div
            class="fixed inset-0 flex items-center justify-center z-50 px-4"
            role="dialog"
            aria-modal="true"
    >
        <div class="bg-white w-full max-w-md rounded-2xl shadow-xl overflow-hidden">
            @if (!submitted) {
            <!-- Header -->
            <div class="flex justify-between items-center px-6 py-4 border-b border-gray-200">
                <h2 class="text-lg font-semibold">Nieuwe code toevoegen</h2>
                <button
                        class="text-gray-500 hover:text-red-500 text-xl"
                        (click)="closeModal()"
                        aria-label="Sluiten"
                >
                    &times;
                </button>
            </div>
            }

            <!-- Body -->
            <div class="px-6 py-4">
                @if (!submitted) {
                <input
                        [(ngModel)]="newRow.webshop"
                        name="webshop"
                        placeholder="Webshop"
                        class="w-full mb-3 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                />
                <input
                        [(ngModel)]="newRow.code"
                        name="code"
                        placeholder="Kortingscode"
                        class="w-full mb-3 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                />
                <input
                        [(ngModel)]="newRow.percentage"
                        name="percentage"
                        placeholder="Hoeveel korting? (bijv '10%' of 'â‚¬5')"
                        class="w-full mb-3 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                />
                <input
                        [(ngModel)]="newRow.name"
                        name="name"
                        placeholder="Jouw naam (niet verplicht)"
                        class="w-full mb-3 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                />
                } @else {
                <div class="bg-green-100 text-green-800 px-4 py-3 rounded-lg text-sm">
                    Dank je, de code is toegevoegd!
                </div>
                }
            </div>

            <!-- Footer -->
            <div class="flex justify-end items-center gap-2 px-6 py-4 border-t border-gray-200">
                @if (!submitted) {
                <button
                        class="px-4 py-2 rounded-lg bg-gray-100 text-gray-700 hover:bg-gray-200 transition"
                        (click)="closeModal()"
                >
                    Annuleren
                </button>
                <button
                        class="px-4 py-2 rounded-lg bg-green-600 text-white hover:bg-green-700 transition"
                        (click)="submit()"
                >
                    Toevoegen
                </button>
                } @else {
                <button
                        class="px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 transition"
                        (click)="closeModal()"
                >
                    Sluiten
                </button>
                }
            </div>
        </div>
    </div>
}
