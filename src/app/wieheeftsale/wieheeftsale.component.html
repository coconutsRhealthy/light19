<div class="min-h-screen bg-white text-gray-800">
  <app-navbar></app-navbar>

  <main class="max-w-5xl mx-auto px-4 py-12">
    <h1 class="text-3xl sm:text-4xl font-bold mb-8 text-center">
      Webshops met lopende sales en aanbiedingen
    </h1>

    <!-- Social banner -->
    <div class="bg-green-50 border border-green-200 text-green-800 text-center rounded-xl px-4 py-3 mb-10 shadow-sm">
      Volg
      <a
              href="https://www.instagram.com/wieheeftsale/"
              onclick="gtag('event', 'insta_whs', {event_category: 'Social', event_label: 'insta_whs_top'})"
              class="text-green-800 font-semibold hover:underline"
      >
        &#64;wieheeftsale
      </a>
      op Insta voor updates
    </div>

    <!-- Search input -->
    <div class="relative mb-6 max-w-md mx-auto">
      <input
              type="text"
              [(ngModel)]="searchTerm"
              (input)="onSearch()"
              placeholder="Zoek op webshop..."
              class="w-full px-4 py-3 rounded-xl border border-gray-300 shadow-sm focus:ring-2 focus:ring-pink-400 focus:outline-none"
      />
      @if (searchTerm) {
      <button
              type="button"
              (click)="searchTerm = ''; onSearch()"
              class="absolute right-3 top-3 text-gray-500 hover:text-gray-700 text-xl"
              aria-label="Clear"
      >
        &times;
      </button>
      }
    </div>

    <!-- Sale table -->
    <div class="overflow-x-auto">
      <table class="w-full text-left border rounded-xl overflow-hidden shadow-md bg-white">
        <thead class="bg-gray-100 border-b">
        <tr>
          <th class="px-4 py-3 font-semibold text-sm text-gray-700">
            Korting bij
            <button
                    (click)="sortByCompany()"
                    class="ml-2 text-gray-500 hover:text-gray-700 text-sm"
                    title="Sorteren op naam"
            >
              ▲▼
            </button>
          </th>
          <th class="px-4 py-3 font-semibold text-sm text-gray-700">Link</th>
        </tr>
        </thead>
        <tbody>
        @for (whsEntry of paginatedWhsEntries; track whsEntry) {
        <tr class="border-t hover:bg-gray-50 transition">
          <td class="px-4 py-3 text-sm sm:text-base">{{ whsEntry.company }}</td>
          <td class="px-4 py-3">
            <button
                    (click)="openUrlInNewTab(whsEntry.url); sendEventToGa('WieHeeftSalePagina', whsEntry.company)"
                    class="inline-block px-4 py-2 text-sm font-medium text-white bg-pink-600 hover:bg-pink-700 rounded-lg transition"
            >
              naar de sale
            </button>
          </td>
        </tr>
        }
        </tbody>
      </table>
    </div>

    <!-- Pagination -->
    <div class="flex justify-center items-center gap-4 mt-8 text-sm text-gray-700">
      <button
              (click)="prevPage()"
              [disabled]="page === 1"
              class="px-4 py-2 rounded-lg bg-gray-200 hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed transition"
      >
        Vorige
      </button>

      <span>Pagina {{ page }} van {{ totalPages }}</span>

      <button
              (click)="nextPage()"
              [disabled]="page === totalPages"
              class="px-4 py-2 rounded-lg bg-gray-200 hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed transition"
      >
        Volgende
      </button>
    </div>
  </main>

  <app-footer></app-footer>
</div>