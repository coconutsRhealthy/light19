<app-navbar></app-navbar>

<!-- Nieuwe look banner -->
@if(isBannerVisible) {
  <div
          class="tw-relative tw-bg-yellow-100 tw-text-yellow-900 tw-text-center tw-text-sm tw-font-medium tw-cursor-pointer tw-transition-all tw-duration-300 tw-overflow-hidden tw-flex tw-justify-center tw-items-center tw-px-4 tw-h-10"
          [class.tw-h-auto]="isExpanded"
          [class.tw-max-h-10]="!isExpanded"
          (click)="toggleNewLookBanner()"
  >
    <div class="tw-flex tw-justify-center tw-items-center tw-gap-2 tw-w-full">
      <span class="tw-leading-none">Nieuwe look! Zelfde kwaliteit kortingscodes ðŸ˜Š</span>
      <button
              class="tw-ml-2 tw-text-yellow-900 hover:tw-text-yellow-800 tw-font-bold tw-text-base"
              (click)="closeNewLookBanner($event)"
              aria-label="Sluit banner"
      >
        &times;
      </button>
    </div>

    <!-- Extra tekst zichtbaar bij uitklappen -->
    @if(isExpanded) {
      <div class="tw-mt-2 tw-text-xs tw-text-yellow-800 tw-transition-opacity tw-duration-300 tw-text-left tw-px-4 tw-w-full">
        Diski.nl gaat met zâ€™n tijd mee! De site heeft een frisse nieuwe look gekregen. Wat niet veranderd is zijn de kortingscodes: nog steeds van dezelfde hoge kwaliteit die je van Diski.nl gewend bent.
      </div>
    }
  </div>
}

<main class="tw-flex-1 tw-max-w-5xl tw-mx-auto tw-px-4 tw-pt-4 tw-pb-8">
  <h1 class="tw-text-3xl sm:tw-text-4xl tw-font-bold tw-mb-6 tw-text-center">
    Online shoppen met kortingscodes
  </h1>

  <!-- Text Banners -->
  <div class="tw-mb-3 tw-w-full tw-max-w-7xl tw-mx-auto">
    <div class="tw-flex tw-flex-col tw-items-center">
      <!-- Kleine Info Banner -->
      <div class="tw-w-full tw-px-3 tw-py-1.5 tw-bg-green-100 tw-text-pink-800 tw-text-xs tw-text-center tw-font-small tw-border tw-border-gray-200 tw-rounded-lg tw-mb-1">
        <div>
          Volg &#64;wiegeeftkorting op
          <a
                  href="https://www.instagram.com/wiegeeftkorting/"
                  target="_blank"
                  class="tw-text-blue-600 hover:tw-text-blue-800 hover:tw-underline"
                  onclick="gtag('event', 'insta', {'event_category': 'Social', 'event_label': 'insta_top'});"
          >
            <strong>insta</strong>
          </a> en
          <a
                  href="https://www.tiktok.com/&#64;wiegeeftkorting2"
                  target="_blank"
                  class="tw-text-blue-600 hover:tw-text-blue-800 hover:tw-underline"
                  onclick="gtag('event', 'tiktok', {'event_category': 'Social', 'event_label': 'tiktok_top'});"
          >
            <strong>tiktok</strong>
          </a> voor code updates
        </div>
        <div>
          â‚¬100
          <a
                  href="https://temu.to/m/u0p32ew176i"
                  target="_blank"
                  class="tw-text-blue-600 hover:tw-text-blue-800 hover:tw-underline"
                  onclick="gtag('event', 'temu', {'event_category': 'Temu', 'event_label': 'temu_prikbord_banner'});"
          >
            <strong>shoptegoed</strong>
          </a>
          en 30% korting bij Temu
        </div>
      </div>
    </div>
  </div>

  <!-- Banner -->
  <a
          rel="sponsored"
          onclick="gtag('event', 'diski_pick', { event_category: 'Diski_Pick', event_label: 'diski_pick_homepage' })"
          href="https://www.awin1.com/cread.php?s=4546909&v=72399&q=491926&r=1870794"
          target="_blank"
          class="tw-block tw-bg-white tw-rounded-2xl tw-shadow-md hover:tw-shadow-lg tw-transition tw-duration-200 tw-overflow-hidden tw-border tw-border-gray-100 tw-mb-6 tw-no-underline"
  >
    <div class="tw-bg-gradient-to-r tw-from-amber-400 tw-to-orange-400 tw-text-white tw-text-center tw-font-medium tw-text-[11px] lg:tw-text-xs tw-py-[2px]">
      Diski Pick ðŸ”¥ Tenways vroege Black Friday deals!
    </div>

    <div class="tw-text-center tw-bg-white">
      <img
              src="https://www.awin1.com/cshow.php?s=4546909&v=72399&q=491926&r=1870794"
              alt="Tenways banner"
              class="tw-w-full tw-h-auto tw-object-contain"
      />
    </div>
  </a>

  <!-- âœ… GEGROEPEERDE SECTIE MET ACHTERGROND -->
  <div class="tw-bg-white/90 tw-rounded-2xl tw-shadow-sm tw-p-4 sm:tw-p-6 tw-border tw-border-gray-100 tw-backdrop-blur-sm">

    <h2 class="tw-font-semibold tw-text-gray-900 tw-mb-4 tw-text-center">
      Nieuwste kortingscodes ðŸ”¥
    </h2>

    <!-- Zoekveld -->
    <div class="tw-mb-2 tw-relative">
      <input
              type="text"
              class="tw-w-full tw-px-4 tw-pr-8 tw-py-2 tw-border tw-rounded tw-shadow-sm focus:tw-outline-none focus:tw-ring"
              placeholder="Zoek op webshop..."
              [(ngModel)]="searchTerm"
              (input)="onSearch()"
      />
      @if(searchTerm) {
        <button
                type="button"
                (click)="searchTerm = ''; onSearch()"
                aria-label="Clear"
                class="tw-absolute tw-right-2 tw-top-1/2 tw-transform tw--translate-y-1/2 tw-text-gray-500 hover:tw-text-gray-600 tw-transition tw-rounded-full tw-w-6 tw-h-6 tw-flex tw-items-center tw-justify-center tw-bg-gray-100 hover:tw-bg-gray-200"
        >
          &times;
        </button>
      }
    </div>

    <!-- Text Banners -->
    <div class="tw-w-full tw-px-3 tw-py-1.5 tw-bg-gray-100 tw-text-pink-800 tw-text-xs tw-text-center tw-font-small tw-border tw-border-gray-200 tw-rounded-lg tw-mb-2">
      <div>&rarr; Extra korting met <a class="tw-text-blue-600 hover:tw-text-blue-800 tw-underline" [routerLink]="['/giftcards']" onclick="gtag('event', 'giftcard', {'event_category': 'Giftcard', 'event_label': 'giftcard_intable_homepage'});">â‚¬7.50 giftcards</a> voor veel shops</div>
      <div>&rarr; Deel kortingscodes met elkaar op het <a class="tw-text-blue-600 hover:tw-text-blue-800 tw-underline" [routerLink]="['/prikbord']" onclick="gtag('event', 'prikbord', {'event_category': 'Prikbord', 'event_label': 'prikbord_intable_homepage'});">diski prikbord</a></div>
    </div>

    <!-- Resultaatkaarten -->
    <div class="tw-grid tw-grid-cols-1 sm:tw-grid-cols-2 lg:tw-grid-cols-3 tw-gap-3 lg:tw-gap-4">
      @for (discount of paginatedDiscounts; track discount) {
      <button
              class="tw-w-full tw-bg-white tw-rounded-2xl tw-shadow-md hover:tw-shadow-lg active:tw-scale-[0.98] tw-transition-all tw-duration-200 tw-p-3 lg:tw-p-4 tw-flex tw-justify-between tw-items-center tw-border tw-border-gray-100 tw-text-left tw-h-full"
              (click)="sendCopyCodeToGa(discount.company); affiliateModalAction(discount)"
      >
        <!-- Linkerzijde: tekst -->
        <div class="tw-flex-1 tw-pr-3">
          <h3 class="tw-text-base lg:tw-text-lg tw-font-semibold tw-text-gray-900 tw-truncate lg:tw-max-w-[180px]">
            {{ discount.company }}
          </h3>

          <p class="tw-text-sm tw-text-gray-600 tw-mt-1">
            ðŸ’¸ {{ getCorrectFormatDiscountPercentage(discount.percentage) }} korting
          </p>
          <p class="tw-text-xs tw-text-gray-400 tw-mt-1">
            Gespot op: {{ formatDate(discount.date) }}
          </p>
        </div>

        <!-- Rechterzijde: logo -->
        @if (getLogoUrl(discount.company)) {
          <div class="tw-flex-shrink-0">
            <img
                    [src]="getLogoUrl(discount.company)"
                    [alt]="discount.company + ' logo'"
                    class="tw-w-16 tw-h-16 lg:tw-w-14 lg:tw-h-14 tw-rounded-md tw-object-contain tw-bg-gray-50 tw-border tw-border-gray-100 tw-ml-auto"
            />
          </div>
        }
      </button>
      }
    </div>

    <!-- Paginatie -->
    <div class="tw-flex tw-items-center tw-justify-center tw-mt-8 tw-gap-4">
      <button
              class="tw-bg-gray-300 hover:tw-bg-gray-400 tw-text-sm tw-px-4 tw-py-2 tw-rounded disabled:tw-opacity-50"
              (click)="prevPage()"
              [disabled]="page === 1">
        Vorige
      </button>
      <span class="tw-text-sm">Pagina {{ page }} van {{ totalPages }}</span>
      <button
              class="tw-bg-gray-300 hover:tw-bg-gray-400 tw-text-sm tw-px-4 tw-py-2 tw-rounded disabled:tw-opacity-50"
              (click)="nextPage()"
              [disabled]="page === totalPages">
        Volgende
      </button>
    </div>
  </div>
  <!-- EINDE VAN DE GEGROEPEERDE SECTIE -->

  <div class="tw-mt-8 tw-flex tw-justify-center">
    <div class="tw-w-full sm:tw-w-10/12 lg:tw-w-10/12">
      <p class="tw-text-gray-800 tw-text-sm sm:tw-text-base tw-leading-relaxed">
        Webshops zoals <a href="https://nl.shein.com/" class="tw-text-blue-600 hover:tw-underline">Shein</a>,
        <a href="https://www.loavies.com/nl/" class="tw-text-blue-600 hover:tw-underline">Loavies</a> en
        <a href="https://www.na-kd.com/nl" class="tw-text-blue-600 hover:tw-underline">Nakd</a> verspreiden regelmatig een kortingscode via social media. Door deze in te vullen
        in hun webshop krijg je korting op je bestelling. Meestal is een kortingscode enkele dagen geldig. De kortingscodes
        worden gedeeld door influencers en content creators. Op deze pagina hou ik een overzicht bij van alle kortingscodes
        die ik voorbij zie komen op Instagram. Gebruik het zoekveld bovenaan de pagina om eenvoudig te zoeken naar bijvoorbeeld
        een Nakd kortingscode of een Loavies kortingscode. Neem ook eens een kijkje op mijn instagram account:
        <a href="https://www.instagram.com/wiegeeftkorting/" class="tw-text-blue-600 hover:tw-underline">&#64;wiegeeftkorting</a>
      </p>
    </div>
  </div>
</main>

<app-modal
        [isVisible]="isModalVisible"
        [discount]="selectedDiscount"
        (closed)="closeModal()">
</app-modal>

<app-footer></app-footer>
