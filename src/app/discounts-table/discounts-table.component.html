<!-- Header -->
<app-navbar></app-navbar>

<!-- Main content -->
<main class="tw-max-w-5xl tw-mx-auto tw-px-4 tw-pt-4 tw-pb-8">
  <h1 class="tw-text-3xl sm:tw-text-4xl tw-font-bold tw-mb-7 tw-text-center">Online shoppen met kortingscodes</h1>

  <!-- Banner -->
  <a
          rel="sponsored"
          onclick="gtag('event', 'diski_pick', { event_category: 'Diski_Pick', event_label: 'diski_pick_homepage' })"
          href="https://www.awin1.com/cread.php?s=4546909&v=72399&q=491926&r=1870794"
          target="_blank"
          class="tw-block tw-bg-white tw-rounded-2xl tw-shadow-md hover:tw-shadow-lg tw-transition tw-duration-200 tw-overflow-hidden tw-border tw-border-gray-100 tw-mb-5 tw-no-underline hover:tw-no-underline focus:tw-no-underline"
  >
    <div class="tw-bg-gradient-to-r tw-from-amber-400 tw-to-orange-400 tw-text-white tw-text-center tw-font-medium tw-text-[11px] lg:tw-text-xs tw-py-[2px]">
      Diski Pick ðŸ”¥ Tenways vroege Black Friday deals!
    </div>

    <div class="tw-text-center tw-bg-white">
      <img
              src="https://www.awin1.com/cshow.php?s=4546909&v=72399&q=491926&r=1870794"
              alt="Tenways banner"
              class="tw-w-full tw-h-auto tw-object-contain"
      />
    </div>
  </a>

  <!-- Zoekveld -->
  <div class="tw-mb-6">
    <input
            type="text"
            class="tw-w-full tw-px-4 tw-py-2 tw-border tw-rounded tw-shadow-sm focus:tw-outline-none focus:tw-ring"
            placeholder="Zoek op webshop..."
            [(ngModel)]="searchTerm"
            (input)="onSearch()"
    />
  </div>

  <!-- Resultaatkaarten -->
  <div class="tw-grid tw-grid-cols-1 sm:tw-grid-cols-2 lg:tw-grid-cols-3 tw-gap-3 lg:tw-gap-4">
    @for (discount of paginatedDiscounts; track discount) {
      <button
              class="tw-w-full tw-bg-white tw-rounded-2xl tw-shadow-md hover:tw-shadow-lg active:tw-scale-[0.98] tw-transition-all tw-duration-200 tw-p-3 lg:tw-p-4 tw-flex tw-justify-between tw-items-center tw-border tw-border-gray-100 tw-text-left tw-h-full"
              (click)="sendCopyCodeToGa(discount.index); affiliateModalAction(discount)"
      >
        <div>
          <h2 class="tw-text-base lg:tw-text-lg tw-font-semibold tw-text-gray-900">{{ discount.company }}</h2>
          <p class="tw-text-sm tw-text-gray-600 tw-mt-1">ðŸ’¸ {{ getCorrectFormatDiscountPercentage(discount.percentage) }} korting</p>
          <p class="tw-text-xs tw-text-gray-400 tw-mt-2">Gespot op: {{ formatDate(discount.date) }}</p>
        </div>
        <div class="tw-flex tw-items-center tw-justify-center tw-w-8 tw-h-8 lg:tw-w-9 lg:tw-h-9 tw-rounded-full tw-bg-gray-100">
          <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="tw-w-4 tw-h-4 lg:tw-w-5 lg:tw-h-5 tw-text-gray-600"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2"
          >
            <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
          </svg>
        </div>
      </button>
    }
  </div>

  <!-- Paginatie -->
  <div class="tw-flex tw-items-center tw-justify-center tw-mt-8 tw-gap-4">
    <button
            class="tw-bg-gray-300 hover:tw-bg-gray-400 tw-text-sm tw-px-4 tw-py-2 tw-rounded disabled:tw-opacity-50"
            (click)="prevPage()"
            [disabled]="page === 1">
      Vorige
    </button>
    <span class="tw-text-sm">Pagina {{ page }} van {{ totalPages }}</span>
    <button
            class="tw-bg-gray-300 hover:tw-bg-gray-400 tw-text-sm tw-px-4 tw-py-2 tw-rounded disabled:tw-opacity-50"
            (click)="nextPage()"
            [disabled]="page === totalPages">
      Volgende
    </button>
  </div>
</main>

<app-modal
        [isVisible]="isModalVisible"
        [discount]="selectedDiscount"
        (closed)="closeModal()">
</app-modal>

<app-footer></app-footer>
