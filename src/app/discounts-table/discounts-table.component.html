<!-- Header -->
<app-navbar></app-navbar>

<!-- Main content -->
<main class="tw-max-w-5xl tw-mx-auto tw-px-4 tw-py-8">
  <h1 class="tw-text-3xl tw-font-bold tw-mb-4 tw-text-center">Online shoppen met kortingscodes</h1>

  <!-- Banners -->
  <div class="tw-flex tw-flex-col sm:tw-flex-row tw-justify-center tw-gap-4 tw-mb-6 tw-text-sm">
    <a href="https://www.instagram.com/wiegeeftkorting/"
       class="tw-bg-green-100 tw-text-green-800 tw-px-4 tw-py-2 tw-rounded hover:tw-bg-green-200"
       onclick="gtag('event', 'insta', {event_category: 'Social', event_label: 'insta_top'})">
      Volg mij op insta en tiktok
    </a>
    <a href="https://temu.to/m/u0p32ew176i" target="_blank"
       class="tw-bg-green-100 tw-text-green-800 tw-px-4 tw-py-2 tw-rounded hover:tw-bg-green-200"
       onclick="gtag('event', 'temu', {event_category: 'Temu', event_label: 'try_temu'})">
      â‚¬100 shoptegoed en 30% korting bij Temu
    </a>
  </div>

  <!-- Zoekveld -->
  <div class="tw-mb-6 tw-flex tw-justify-center">
    <input
            type="text"
            class="tw-w-full sm:tw-w-1/2 tw-px-4 tw-py-2 tw-border tw-rounded tw-shadow-sm focus:tw-outline-none focus:tw-ring"
            placeholder="Zoek op webshop..."
            [(ngModel)]="searchTerm"
            (input)="onSearch()"
    />
  </div>

  <!-- Resultaatkaarten -->
  <div class="tw-grid tw-grid-cols-1 sm:tw-grid-cols-2 lg:tw-grid-cols-3 tw-gap-4">
    @for (discount of paginatedDiscounts; track discount) {
    <div class="tw-bg-white tw-shadow tw-rounded-lg tw-p-4 tw-flex tw-justify-between tw-items-center hover:tw-shadow-md tw-transition">
      <div>
        <h2 class="tw-text-lg tw-font-semibold">
          <a [routerLink]="['/', discount.company]"
             class="hover:tw-underline tw-text-blue-700"
             onclick="gtag('event', 'homepage_subtle', {event_category: 'Homepage_subtle', event_label: 'homepage_subtle'})">
            {{ discount.company }}
          </a>
        </h2>
        <p class="tw-text-sm tw-text-gray-500">
          {{ formatDate(discount.date) }}
        </p>
      </div>
      {{ discount.percentage ? discount.percentage + '%' : '' }}
    </div>
    }
  </div>

  <!-- Paginatie -->
  <div class="tw-flex tw-items-center tw-justify-center tw-mt-8 tw-gap-4">
    <button
            class="tw-bg-gray-300 hover:tw-bg-gray-400 tw-text-sm tw-px-4 tw-py-2 tw-rounded disabled:tw-opacity-50"
            (click)="prevPage()"
            [disabled]="page === 1">
      Vorige
    </button>
    <span class="tw-text-sm">Pagina {{ page }} van {{ totalPages }}</span>
    <button
            class="tw-bg-gray-300 hover:tw-bg-gray-400 tw-text-sm tw-px-4 tw-py-2 tw-rounded disabled:tw-opacity-50"
            (click)="nextPage()"
            [disabled]="page === totalPages">
      Volgende
    </button>
  </div>
</main>

<app-modal
        [isVisible]="isModalVisible"
        [discount]="selectedDiscount"
        (closed)="closeModal()">
</app-modal>

<app-footer></app-footer>
