<!-- Header -->
<app-navbar></app-navbar>

<!-- Main content -->
<main class="max-w-5xl mx-auto px-4 py-8">
  <h1 class="text-3xl font-bold mb-4 text-center">Online shoppen met kortingscodes</h1>

  <!-- Banners -->
  <div class="flex flex-col sm:flex-row justify-center gap-4 mb-6 text-sm">
    <a href="https://www.instagram.com/wiegeeftkorting/" class="bg-green-100 text-green-800 px-4 py-2 rounded hover:bg-green-200"
       onclick="gtag('event', 'insta', {event_category: 'Social', event_label: 'insta_top'})">
      Volg mij op insta en tiktok
    </a>
    <a href="https://temu.to/m/u0p32ew176i" target="_blank" class="bg-green-100 text-green-800 px-4 py-2 rounded hover:bg-green-200"
       onclick="gtag('event', 'temu', {event_category: 'Temu', event_label: 'try_temu'})">
      €100 shoptegoed en 30% korting bij Temu
    </a>
  </div>

  <!-- Zomersale banner -->
  <div class="mb-6 text-center text-yellow-800 bg-yellow-100 px-4 py-2 rounded text-sm">
    Alle zomersales overzichtelijk verzameld op één pagina:
    <a routerLink="/wieheeftsale" class="underline font-semibold"
       onclick="gtag('event', 'wieheeftsale', {event_category: 'Wieheeftsale', event_label: 'wieheeftsale_intable_homepage'})">
      diski.nl/wieheeftsale
    </a>
    –
    <a routerLink="/wieheeftsale" class="underline">Klik hier</a>
  </div>

  <!-- Zoekveld -->
  <div class="mb-6 flex justify-center">
    <input
            type="text"
            class="w-full sm:w-1/2 px-4 py-2 border rounded shadow-sm focus:outline-none focus:ring"
            placeholder="Zoek op webshop..."
            [(ngModel)]="searchTerm"
            (input)="onSearch()"
    />
  </div>

  <!-- Resultaatkaarten -->
  <div class="grid gap-4">
    @for (discount of paginatedDiscounts; track discount) {
    <div class="bg-white shadow rounded-lg p-4 flex justify-between items-center hover:shadow-md transition">
      <div>
        <h2 class="text-lg font-semibold">
          <a [routerLink]="['/', discount.company]" class="hover:underline text-blue-700"
             onclick="gtag('event', 'homepage_subtle', {event_category: 'Homepage_subtle', event_label: 'homepage_subtle'})">
            {{ discount.company }}
          </a>
        </h2>
        <p class="text-sm text-gray-500">
          {{ discount.percentage ? discount.percentage + '% korting' : 'Korting' }} · Geüpdatet: {{ formatDate(discount.date) }}
        </p>
      </div>
      <button
              class="bg-black text-white text-sm px-4 py-2 rounded-full hover:bg-gray-800"
              (click)="affiliateModalAction(discount)">
        Pak code
      </button>
    </div>
    }
  </div>

  <!-- Paginatie -->
  <div class="flex items-center justify-center mt-8 gap-4">
    <button
            class="bg-gray-300 hover:bg-gray-400 text-sm px-4 py-2 rounded disabled:opacity-50"
            (click)="prevPage()"
            [disabled]="page === 1">
      Vorige
    </button>
    <span class="text-sm">Pagina {{ page }} van {{ totalPages }}</span>
    <button
            class="bg-gray-300 hover:bg-gray-400 text-sm px-4 py-2 rounded disabled:opacity-50"
            (click)="nextPage()"
            [disabled]="page === totalPages">
      Volgende
    </button>
  </div>
</main>

<app-modal
        [isVisible]="isModalVisible"
        [discount]="selectedDiscount"
        (closed)="closeModal()">
</app-modal>

<app-footer></app-footer>
