<!-- Header -->
<app-navbar></app-navbar>

<!-- Main content -->
<main class="tw-max-w-5xl tw-mx-auto tw-px-4 tw-py-8">
  <h1 class="tw-text-3xl tw-font-bold tw-mb-4 tw-text-center">Online shoppen met kortingscodes</h1>

  <!-- Banners -->
  <div class="tw-flex tw-flex-col sm:tw-flex-row tw-justify-center tw-gap-4 tw-mb-6 tw-text-sm">
    <a href="https://www.instagram.com/wiegeeftkorting/"
       class="tw-bg-green-100 tw-text-green-800 tw-px-4 tw-py-2 tw-rounded hover:tw-bg-green-200"
       onclick="gtag('event', 'insta', {event_category: 'Social', event_label: 'insta_top'})">
      Volg mij op insta en tiktok
    </a>
    <a href="https://temu.to/m/u0p32ew176i" target="_blank"
       class="tw-bg-green-100 tw-text-green-800 tw-px-4 tw-py-2 tw-rounded hover:tw-bg-green-200"
       onclick="gtag('event', 'temu', {event_category: 'Temu', event_label: 'try_temu'})">
      â‚¬100 shoptegoed en 30% korting bij Temu
    </a>
  </div>

  <!-- Zoekveld -->
  <div class="tw-mb-6 tw-flex tw-justify-center">
    <input
            type="text"
            class="tw-w-full sm:tw-w-1/2 tw-px-4 tw-py-2 tw-border tw-rounded tw-shadow-sm focus:tw-outline-none focus:tw-ring"
            placeholder="Zoek op webshop..."
            [(ngModel)]="searchTerm"
            (input)="onSearch()"
    />
  </div>

  <div class="tw-max-w-sm tw-mx-auto tw-p-3">
    <button
            class="tw-w-full tw-text-left tw-bg-white tw-rounded-2xl tw-shadow-md hover:tw-shadow-lg active:tw-scale-[0.98] tw-transition-all tw-duration-200 tw-p-4 tw-flex tw-justify-between tw-items-center tw-border tw-border-gray-100"
    >
      <div>
        <h2 class="tw-text-lg tw-font-semibold tw-text-gray-900">Bol.com</h2>
        <p class="tw-text-sm tw-text-gray-600 tw-mt-1">ðŸ’¸ 20% korting met code</p>
        <p class="tw-text-xs tw-text-gray-400 tw-mt-2">Gespot op: 14 oktober 2025</p>
      </div>
      <div class="tw-flex tw-items-center tw-justify-center tw-w-9 tw-h-9 tw-rounded-full tw-bg-gray-100">
        <svg
                xmlns="http://www.w3.org/2000/svg"
                class="tw-w-5 tw-h-5 tw-text-gray-600"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
                stroke-width="2"
        >
          <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
        </svg>
      </div>
    </button>
  </div>


  <!-- Resultaatkaarten -->
  <div class="tw-grid tw-grid-cols-1 sm:tw-grid-cols-2 lg:tw-grid-cols-3 tw-gap-4">
    @for (discount of paginatedDiscounts; track discount) {
    <div
            class="tw-bg-white tw-shadow tw-rounded-lg tw-p-4 tw-transition tw-duration-200 tw-ease-in-out hover:tw-shadow-lg active:tw-bg-gray-100 active:tw-scale-95 tw-cursor-pointer focus:tw-outline-none focus:tw-ring-2 focus:tw-ring-blue-400"
            tabindex="0"
            (click)="affiliateModalAction(discount)">

      <!-- Top row: bedrijfsnaam links, percentage rechts -->
      <div class="tw-flex tw-justify-between tw-items-start tw-mb-4">
        <h2 class="tw-text-lg tw-font-semibold tw-text-blue-700 hover:tw-underline">
          {{ discount.company }}
        </h2>
        <span class="tw-font-bold tw-text-gray-800">
        {{ discount.percentage ? discount.percentage + '' : '' }}
      </span>
      </div>

      <!-- Bottom row: datum links, subtiele pijl-knop rechts -->
      <div class="tw-flex tw-justify-between tw-items-end">
        <p class="tw-text-sm tw-text-gray-500">
          {{ formatDate(discount.date) }}
        </p>

          &gt;

      </div>
    </div>
    }
  </div>






  <!-- Paginatie -->
  <div class="tw-flex tw-items-center tw-justify-center tw-mt-8 tw-gap-4">
    <button
            class="tw-bg-gray-300 hover:tw-bg-gray-400 tw-text-sm tw-px-4 tw-py-2 tw-rounded disabled:tw-opacity-50"
            (click)="prevPage()"
            [disabled]="page === 1">
      Vorige
    </button>
    <span class="tw-text-sm">Pagina {{ page }} van {{ totalPages }}</span>
    <button
            class="tw-bg-gray-300 hover:tw-bg-gray-400 tw-text-sm tw-px-4 tw-py-2 tw-rounded disabled:tw-opacity-50"
            (click)="nextPage()"
            [disabled]="page === totalPages">
      Volgende
    </button>
  </div>
</main>

<app-modal
        [isVisible]="isModalVisible"
        [discount]="selectedDiscount"
        (closed)="closeModal()">
</app-modal>

<app-footer></app-footer>
