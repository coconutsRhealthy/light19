@if (isVisible) {
<!-- Backdrop -->
<div
        class="tw-fixed tw-inset-0 tw-bg-black/40 tw-backdrop-blur-sm tw-z-40 tw-animate-fadeIn"
        (click)="closeModal()"
></div>

<!-- Modal -->
<div
        class="tw-fixed tw-inset-0 tw-flex tw-items-center tw-justify-center tw-z-50"
>
    <div
            class="tw-bg-white tw-rounded-3xl tw-shadow-2xl tw-border tw-border-gray-100 tw-w-[90%] sm:tw-w-[420px] tw-overflow-hidden tw-animate-slideUp"
    >
        <!-- Header -->
        <div
                class="tw-flex tw-justify-between tw-items-center tw-px-6 tw-py-4 tw-border-b tw-border-gray-200"
        >
            <h2 class="tw-font-bold tw-text-lg tw-text-gray-900">
                ðŸŽ‰ {{ discount.company  }} kortingscode
            </h2>
            <button
                    (click)="closeModal()"
                    class="tw-text-gray-400 hover:tw-text-gray-600 tw-transition"
                    aria-label="Close"
            >
                âœ•
            </button>
        </div>

        <!-- Body -->
        @if (discount) {
        <div class="tw-px-6 tw-py-6 tw-space-y-5">
            <!-- Code -->
            <div class="tw-flex tw-items-center tw-justify-between">
                <span class="tw-font-semibold tw-text-gray-600">Code</span>

                <div class="tw-relative tw-flex tw-items-center tw-gap-2">
                    <button
                            (click)="copyToClipboard(discount.discountCode)"
                            class="tw-group tw-flex tw-items-center tw-gap-2 tw-font-mono tw-text-gray-900 tw-text-base tw-bg-gray-50 tw-border tw-border-gray-200 tw-rounded-md tw-px-3 tw-py-1.5 hover:tw-bg-gray-100 tw-transition tw-w-fit"
                    >
                        <span>{{ discount.discountCode }}</span>
                        <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="tw-h-4 tw-w-4 tw-text-gray-500 group-hover:tw-text-gray-700 tw-transition"
                                fill="none"
                                viewBox="0 0 24 24"
                                stroke="currentColor"
                                stroke-width="2"
                        >
                            <path
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    d="M8 16h8M8 12h8m-7 8h6a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2v16l3-2z"
                            />
                        </svg>

                        @if (isCopied) {
                        <div
                                class="tw-absolute tw--top-6 tw-left-1/2 tw--translate-x-1/2 tw-bg-gray-900 tw-text-white tw-text-xs tw-rounded tw-px-2 tw-py-[2px] tw-shadow-md tw-animate-fadeIn"
                        >
                            Copied!
                        </div>
                        }
                    </button>
                </div>
            </div>

            <!-- Discount -->
            <div class="tw-flex tw-justify-between tw-text-sm tw-text-gray-700">
                <span>Korting</span>
                <span class="tw-font-medium">{{
              getCorrectFormatDiscountPercentage(discount.percentage)
            }}</span>
            </div>

            <!-- Date -->
            <div class="tw-flex tw-justify-between tw-text-sm tw-text-gray-700">
                <span>Gespot op</span>
                <span>{{ getCorrectFormatOfCodeDate(discount.date) }}</span>
            </div>
        </div>
        }

        <!-- Footer -->
        <div
                class="tw-bg-gray-50 tw-px-6 tw-py-4 tw-flex tw-justify-center tw-border-t tw-border-gray-200"
        >
            <a
                    [href]="getDiscountUrl()"
                    target="_blank"
                    rel="sponsored"
                    class="tw-bg-amber-500 hover:tw-bg-amber-600 tw-text-white tw-font-semibold tw-rounded-xl tw-px-6 tw-py-2 tw-transition"
            >
                Naar winkel â†’
            </a>
        </div>
    </div>
</div>
}
